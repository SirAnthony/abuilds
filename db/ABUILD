# ABUILD generated by mkpkg_generator.sh

pkgname=db
pkgver=6.1.23
pkgbuild=1
arch=("auto")

shortdesc=("Berkeley embedded database system")
tags=("libs dev-libs")
source=("http://download.oracle.com/berkeley-db/db-${pkgver}.tar.gz")
build_deps="glibc-solibs gcc"

build() {
  go_src_dir
  burn_patches
  cd build_unix
  ../dist/configure --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX} \
    --enable-compat185 \
    --enable-shared \
    --enable-static \
    --enable-cxx \
    --enable-dbm \
    --mandir=/usr/man \
    --docdir=/usr/doc
  make LIBSO_LIBS=-lpthread -j${numjobs}
  make DESTDIR="${pkgdir}" install
  rm -r "${pkgdir}"/usr/docs
}
