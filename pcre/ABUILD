# ABUILD generated by mkpkg_generator.sh

pkgname=pcre
pkgver=8.36
pkgbuild=1
arch=("auto")

shortdesc=("Perl-compatible regular expression library")
longdesc=("The PCRE library is a set of functions that implement regular expression pattern matching using the same syntax and semantics as Perl 5, with just a few differences (documented in the man page). The PCRE library is used by KDE's Konqueror browser.")

tags=("dev-libs libs")

source=("ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/${pkgname}-${pkgver}.tar.bz2")
build_deps="gcc"

before_build() {
  go_src_dir
  sed -i '12140d' testdata/testoutput2
}

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
 --enable-utf8 \
 --enable-unicode-properties \
 --libdir=/usr/lib$LIBDIRSUFFIX \
 --mandir=/usr/man \
 --docdir=/usr/doc/${pkgname}-${pkgver} \
 --enable-pcre16 \
 --enable-pcre32 \
 --enable-jit"
INSTALL_KEYS="DESTDIR=$pkgdir"

after_build() {
  go_src_dir
  install -dm755 ${pkgdir}/lib${LIBDIRSUFFIX}
  mv ${pkgdir}/usr/lib${LIBDIRSUFFIX}/libpcre.so* ${pkgdir}/lib${LIBDIRSUFFIX}/
  ln -s ../../lib${LIBDIRSUFFIX}/libpcre.so.1 "${pkgdir}"/usr/lib${LIBDIRSUFFIX}/libpcre.so
}

